{"version":3,"sources":["webpack:///src/components/employee/basic-ratings.vue","webpack:///./src/components/employee/basic-ratings.vue?3737","webpack:///./src/components/employee/basic-ratings.vue"],"names":["basic_ratings","data","rules","1","2","3","4","5","score","basicColumnTitle","title","row","width","format","ratio","basicTableData","components","crumbs","crumbs_com","basicScore","basic_score","computed","quarterId","this","$store","state","common","staffInfo","user","staff","basic","basicsScoreCount","rule","class","count","key","id","evaluateScore","beforeMount","getRules","methods","back","$router","go","_this","$http","url","then","setScoreData","onChangeQuarter","getStaffInfo","_this2","staffId","uid","_this3","rulesClass","map","item","index","scoreItem","push","employee_basic_ratings","render","_vm","_h","$createElement","_c","_self","staticClass","on","callback","attrs","slot","click","_v","_s","length","tableTitle","tableData","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/29.e471c3115be1cef97d81.js","sourcesContent":["<style lang=\"less\" scoped>\n  .table-part-container {\n    padding: 10px 10px 0 10px;\n    .rating-detail {\n      background: #f3f3f7;\n      height: 40px;\n      line-height: 40px;\n      margin-bottom: 10px;\n      .rating-item {\n        display: inline-block;\n        margin-left: 20px;\n        font-size: 14px;\n        color: #6e6e6e;\n        .rating-score {\n          color: #000;\n        }\n      }\n    }\n  }\n\n  .sub-container {\n    border-top: 0;\n  }\n</style>\n<template>\n  <div class=\"container\">\n    <crumbs @callback=\"onChangeQuarter\">\n      <i slot=\"backIcon\"\n         @click=\"back\"\n         class=\"iconfont icon-back\"></i>\n      <template slot='is-select'>\n      </template>\n    </crumbs>\n    <div class=\"sub-container\">\n      <div class=\"table-part-container\">\n        <div class=\"rating-detail\">\n          <div class=\"rating-item\">\n            本项权重: <span class=\"rating-score\">{{rules[1].ratio}}%</span>\n          </div>\n          <div class=\"rating-item\">\n            项目数: <span class=\"rating-score\">{{basicTableData.length}}</span>\n          </div>\n          <div class=\"rating-item\">\n            本项得分: <span class=\"rating-score\">{{basicsScoreCount}}</span>\n          </div>\n        </div>\n        <basic-score :tableTitle=\"basicColumnTitle\" :tableData=\"basicTableData\">\n          <span slot='basic-msg'></span>\n        </basic-score>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport crumbsCom from '@/components/com/crumbs-com'\nimport BasicScore from '@/components/com/basic-score'\n\nexport default {\n  data () {\n    return {\n      rules: {\n        1: {},\n        2: {},\n        3: {},\n        4: {},\n        5: {}\n      },\n      score: {\n        data: {}\n      },\n      basicColumnTitle: [\n        {\n          title: '考核事项',\n          row: 'name'\n        },\n        {\n          title: '子权重',\n          row: 'ratio',\n          width: 120,\n          format: (row) => {\n            return row.ratio + '%'\n          }\n        },\n        {\n          title: '具体评分',\n          row: 'score',\n          width: 120\n        }\n      ],\n      basicTableData: []\n    }\n  },\n  components: {\n    crumbs: crumbsCom,\n    basicScore: BasicScore\n  },\n  computed: {\n    quarterId () {\n      return this.$store.state.common.quarterId\n    },\n    staffInfo () {\n      return this.$store.state.common.user\n    },\n    staff () {\n      return this.$store.state.basic.staff\n    },\n    basicsScoreCount () {\n      let data = this.score.data[1] || {}\n      let rule = this.rules[1].class || {}\n      let count = 0\n      for (let key in rule) {\n        let score = data[rule[key].id] ? data[rule[key].id].evaluateScore : ''\n        if (score !== '') {\n          count += score * rule[key].ratio / 100\n        } else {\n          count = -1\n          break\n        }\n      }\n      return count === -1 ? '-' : count\n    }\n  },\n  beforeMount () {\n    this.getRules()\n  },\n  methods: {\n    back () {\n      this.$router.go(-1)\n    },\n    getRules () {\n      this.$http({\n        url: 'score/rules'\n      }).then(data => {\n        this.rules = data\n        this.setScoreData()\n      })\n    },\n    onChangeQuarter () {\n      this.getStaffInfo()\n    },\n    getStaffInfo () {\n      this.$http({\n        url: 'score/staff',\n        data: {\n          quarterId: this.quarterId,\n          staffId: this.staffInfo.uid\n        }\n      }).then(data => {\n        this.user = data.user\n        this.score = data.score\n        this.setScoreData()\n      })\n    },\n    setScoreData () {\n      // 基础评分\n      let rulesClass = this.rules[1].class || []\n      this.basicTableData = []\n      rulesClass.map((item, index) => {\n        if (index > 2) return\n        let scoreItem = this.score.data[1] ? this.score.data[1][item.id] : {}\n        item.score = scoreItem.evaluateScore || '-'\n        this.basicTableData.push(item)\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/employee/basic-ratings.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('crumbs',{on:{\"callback\":_vm.onChangeQuarter}},[_c('i',{staticClass:\"iconfont icon-back\",attrs:{\"slot\":\"backIcon\"},on:{\"click\":_vm.back},slot:\"backIcon\"}),_vm._v(\" \"),_c('template',{slot:\"is-select\"})],2),_vm._v(\" \"),_c('div',{staticClass:\"sub-container\"},[_c('div',{staticClass:\"table-part-container\"},[_c('div',{staticClass:\"rating-detail\"},[_c('div',{staticClass:\"rating-item\"},[_vm._v(\"\\n          本项权重: \"),_c('span',{staticClass:\"rating-score\"},[_vm._v(_vm._s(_vm.rules[1].ratio)+\"%\")])]),_vm._v(\" \"),_c('div',{staticClass:\"rating-item\"},[_vm._v(\"\\n          项目数: \"),_c('span',{staticClass:\"rating-score\"},[_vm._v(_vm._s(_vm.basicTableData.length))])]),_vm._v(\" \"),_c('div',{staticClass:\"rating-item\"},[_vm._v(\"\\n          本项得分: \"),_c('span',{staticClass:\"rating-score\"},[_vm._v(_vm._s(_vm.basicsScoreCount))])])]),_vm._v(\" \"),_c('basic-score',{attrs:{\"tableTitle\":_vm.basicColumnTitle,\"tableData\":_vm.basicTableData}},[_c('span',{attrs:{\"slot\":\"basic-msg\"},slot:\"basic-msg\"})])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-220ecc9f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/employee/basic-ratings.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-220ecc9f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/liqingshan/git  web  project/performance/per-white/src/assets/style/variable.less\\\"]}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./basic-ratings.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./basic-ratings.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./basic-ratings.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-220ecc9f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./basic-ratings.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-220ecc9f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/employee/basic-ratings.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}